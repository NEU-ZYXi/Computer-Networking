
3.3 使用广播信道的数据链路层
  广播信道可以实现一对多的通信，局域网使用的是广播信道
  
  1. 局域网的数据链路层
    (1). 局域网的特点
      1). 网络为一个单位所拥有，且地里范围和站点数目均有限
      2). 具有广播功能，从一个站点可以方便地访问全网
      3). 便于系统的扩展，各设备的位置可以灵活调整
      4). 提高了系统的可靠性(reliability)、可用性(availability)和生存性(survivability)
      
    (2). 按网络拓扑进行分类
      1). 星型网：常见的是星型以太网
      2). 环形网，最典型的是令牌环形网(token ring)
      3). 总线网：各站直接连在总线上，常见的总线网使用传统以太网使用的CSMA/CD协议
      4). 树形网：是总线网的变型，主要用于频分复用的宽带局域网
      
    (3). 共享信道用于使用户能够合理而方便地共享通信媒体资源
      1). 静态划分信道：用户只要分配到了信道就不会和其他用户发生冲突
      2). 动态媒体接入控制，又称多点接入(multiple access)
        特点是信道并非在用户通信时固定分配给用户
        I. 随机接入：所有用户随机地发送信息，如果有多个用户在同一时刻发送信息，在共享媒体上会产生碰撞使这些发送都失败
        II. 受控接入：用户不能随机地发送信息而是服从一定的控制
        
  2. CSMA/CD协议
    总线的特点：当一台计算机发送数据时，总线上的所有计算机都能检测到这个数据，这是广播通信方式
    实现一对一的通信：使每一台计算机的适配器拥有一个与其他适配器都不同的地址，在发送数据帧时，指定接收站的地址，只有地址一致的适配器才能接收这个数据帧
                     (1). 适配器(adapter)是主机箱内的一块网络接口板，即网卡
                          用来进行数据串行传输和并行传输的转换，适配器接收和发送帧时不使用CPU，当收到有差错的帧时就丢弃，否则就交付给网络层
                          
    (1). 采用灵活的无连接的工作方式，即不必先建立连接就可以直接发送数据
         适配器对发送的数据帧不进行编号，也不要求对方发回确认，即以太网提供的服务是不可靠的交付
         接收站会丢弃有差错的数据帧，但是否需要重传由高层决定，即以太网不能分辨是否为重传帧，而是当作新的数据帧来发送
    (2). 以太网发送的数据使用曼彻斯特(manchester)编码的信号
         编码方法是把每一个码元再分成两个相等的间隔，1为前高后低，0为前低后高
         
    (3). CSMA/CD(carrier sense multiple access with collision detection)，即载波监听多点接入/碰撞检测，是以太网采用的协调方法
         1). 多点接入：多个计算机以多点接入的方式接在一根总线上，是总线型网络
         2). 载波监听：是发送前先监听，即每一个站在发送数据之前先要检测一下总线上是否有其他站在发送数据，如果有，则不发送数据
         3). 碰撞检测：是边发送边监听，即适配器边发送数据边检测信道上的信号电压的变化情况，以便判断是否有其他站也在发送数据
                      当多个站同时在总线上发送数据时，总线上的信号电压变化幅度会增大，超过一定的阈值，则发送碰撞，传输信号产生失真 
         4). 发送的不确定性：由于电磁波在总线上总是以有限的速率传播，即存在传播时延，以太网不能保证某一时间内一定可以成功发送数据帧，可能产生碰撞
                            单程端到端的传播时延为τ，端到端往返时间2τ称为争用期(contention period)，又称为碰撞窗口(collision window)
                            只有经过争用期这段时间还没有检测到碰撞，才能肯定这次发送不会发生碰撞
         5). 一个站不能同时进行发送和接收，即以太网不是全双工通信，而是进行双向交替通信，即半双工通信
         6). 使用二进制指数退避(truncated binary exponential backoff)算法来解决碰撞问题
             让发生碰撞的站在停止发送数据后，不是等待信道变为空闲后就立即再发送数据，而是推迟一个随机的时间，能够减小再次发生碰撞的概率
             I. 确认基本退避时间，即争用期
             II. 从定义好的一个离散整数集合里随机取出一个数r，则重传应推迟的时间为r倍的争用期
             III. 当重传达16次仍不能成功时，则丢弃该数据帧
             
         7). CSMA/CD协议要点总结
           I. 适配器从网络层获得一个分组，加上以太网的首部和尾部，组成以太网帧，放入适配器的缓存中，准备发送
           II. 若适配器检测到信道空闲，即在96比特时间内没有检测到新岛上有信号，就发送这个帧，若检测到信道被占用，则继续检测并等待信道转为空闲
           III. 在发送过程中继续检测信道，若未检测到碰撞，则成功发送这个帧，若检测到碰撞，则中止数据的发送，并发送人为干扰信号
           IV. 在中止发送后，适配器执行指数退避算法，等待r倍512比特时间后，返回到步骤II
           
           
                      
      
